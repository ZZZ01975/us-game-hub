<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é”™è¯¯å¤„ç†æµ‹è¯• - US Game Hub</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/game.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: var(--bg-primary);
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }
        
        .test-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        
        .test-btn {
            padding: 10px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .test-btn:hover {
            background: var(--primary-hover);
        }
        
        .demo-container {
            min-height: 300px;
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            margin-top: 16px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>é”™è¯¯å¤„ç†åŠŸèƒ½æµ‹è¯•</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•US Game Hubçš„é”™è¯¯å¤„ç†åŠŸèƒ½ã€‚</p>
        
        <!-- ç½‘ç»œé”™è¯¯æµ‹è¯• -->
        <div class="test-section">
            <h2>ç½‘ç»œé”™è¯¯å¤„ç†æµ‹è¯•</h2>
            <p>æµ‹è¯•ç½‘ç»œè¿æ¥å¤±è´¥ã€è¶…æ—¶ç­‰æƒ…å†µçš„å¤„ç†ã€‚</p>
            <div class="test-buttons">
                <button class="test-btn" onclick="testNetworkError()">æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯</button>
                <button class="test-btn" onclick="testTimeoutError()">æ¨¡æ‹Ÿè¯·æ±‚è¶…æ—¶</button>
                <button class="test-btn" onclick="testServerError()">æ¨¡æ‹ŸæœåŠ¡å™¨é”™è¯¯</button>
                <button class="test-btn" onclick="testOfflineMode()">æ¨¡æ‹Ÿç¦»çº¿çŠ¶æ€</button>
            </div>
            <div id="network-demo" class="demo-container"></div>
        </div>
        
        <!-- æ¸¸æˆåŠ è½½é”™è¯¯æµ‹è¯• -->
        <div class="test-section">
            <h2>æ¸¸æˆåŠ è½½é”™è¯¯å¤„ç†æµ‹è¯•</h2>
            <p>æµ‹è¯•æ¸¸æˆiframeåŠ è½½å¤±è´¥ã€è¶…æ—¶ç­‰æƒ…å†µçš„å¤„ç†ã€‚</p>
            <div class="test-buttons">
                <button class="test-btn" onclick="testGameLoadError()">æ¨¡æ‹Ÿæ¸¸æˆåŠ è½½å¤±è´¥</button>
                <button class="test-btn" onclick="testGameTimeout()">æ¨¡æ‹Ÿæ¸¸æˆåŠ è½½è¶…æ—¶</button>
                <button class="test-btn" onclick="testInvalidGameUrl()">æ¨¡æ‹Ÿæ— æ•ˆæ¸¸æˆURL</button>
                <button class="test-btn" onclick="testGameUnavailable()">æ¨¡æ‹Ÿæ¸¸æˆä¸å¯ç”¨</button>
            </div>
            <div id="game-demo" class="demo-container"></div>
        </div>
        
        <!-- é”™è¯¯å¯¹è¯æ¡†æµ‹è¯• -->
        <div class="test-section">
            <h2>é”™è¯¯å¯¹è¯æ¡†æµ‹è¯•</h2>
            <p>æµ‹è¯•å„ç§é”™è¯¯å¯¹è¯æ¡†çš„æ˜¾ç¤ºæ•ˆæœã€‚</p>
            <div class="test-buttons">
                <button class="test-btn" onclick="testErrorDialog()">æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡†</button>
                <button class="test-btn" onclick="testWarningDialog()">æ˜¾ç¤ºè­¦å‘Šå¯¹è¯æ¡†</button>
                <button class="test-btn" onclick="testTimeoutDialog()">æ˜¾ç¤ºè¶…æ—¶å¯¹è¯æ¡†</button>
                <button class="test-btn" onclick="testOfflineDialog()">æ˜¾ç¤ºç¦»çº¿å¯¹è¯æ¡†</button>
            </div>
        </div>
        
        <!-- è¿”å›é¦–é¡µ -->
        <div style="text-align: center; margin-top: 40px;">
            <a href="index.html" class="test-btn" style="text-decoration: none; display: inline-block;">
                è¿”å›é¦–é¡µ
            </a>
        </div>
    </div>

    <script type="module">
        import errorHandler from './js/modules/ErrorHandler.js';
        import gameErrorHandler from './js/modules/GameErrorHandler.js';
        
        // ç½‘ç»œé”™è¯¯æµ‹è¯•å‡½æ•°
        window.testNetworkError = function() {
            const container = document.getElementById('network-demo');
            errorHandler._showNetworkErrorDialog('ç½‘ç»œè¿æ¥å¤±è´¥', 'data/games.json', {});
        };
        
        window.testTimeoutError = function() {
            const container = document.getElementById('network-demo');
            errorHandler._showTimeoutDialog('data/games.json');
        };
        
        window.testServerError = function() {
            const container = document.getElementById('network-demo');
            errorHandler._showServerErrorDialog(500);
        };
        
        window.testOfflineMode = function() {
            const container = document.getElementById('network-demo');
            errorHandler._showOfflineDialog();
        };
        
        // æ¸¸æˆåŠ è½½é”™è¯¯æµ‹è¯•å‡½æ•°
        window.testGameLoadError = function() {
            const container = document.getElementById('game-demo');
            gameErrorHandler._showGameErrorInterface('æµ‹è¯•æ¸¸æˆ', container, 'games/test/index.html');
        };
        
        window.testGameTimeout = function() {
            const container = document.getElementById('game-demo');
            gameErrorHandler._showGameTimeoutInterface('æµ‹è¯•æ¸¸æˆ', container, 'games/test/index.html');
        };
        
        window.testInvalidGameUrl = function() {
            const container = document.getElementById('game-demo');
            container.innerHTML = `
                <div class="game-error-interface">
                    <div class="error-content">
                        <div class="error-icon">ğŸš«</div>
                        <h3 class="error-title">æ— æ•ˆçš„æ¸¸æˆURL</h3>
                        <p class="error-message">æ¸¸æˆé“¾æ¥æ— æ•ˆæˆ–å·²å¤±æ•ˆï¼Œæ— æ³•åŠ è½½æ¸¸æˆã€‚</p>
                        <div class="error-actions">
                            <button class="btn btn-primary" onclick="window.location.reload()">
                                <span>ğŸ”„</span>
                                <span>åˆ·æ–°é¡µé¢</span>
                            </button>
                            <button class="btn btn-secondary" onclick="alert('æŸ¥æ‰¾æ›¿ä»£æ¸¸æˆ')">
                                <span>ğŸ®</span>
                                <span>æŸ¥æ‰¾æ›¿ä»£æ¸¸æˆ</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        };
        
        window.testGameUnavailable = function() {
            const container = document.getElementById('game-demo');
            container.innerHTML = `
                <div class="game-unavailable">
                    <div class="unavailable-content">
                        <div class="unavailable-icon">ğŸš§</div>
                        <h3 class="unavailable-title">æ¸¸æˆæš‚ä¸å¯ç”¨</h3>
                        <p class="unavailable-message">è¯¥æ¸¸æˆæ­£åœ¨ç»´æŠ¤ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
                        <div class="unavailable-actions">
                            <button class="btn btn-primary" onclick="window.location.reload()">
                                <span>ğŸ”„</span>
                                <span>åˆ·æ–°é¡µé¢</span>
                            </button>
                            <button class="btn btn-secondary" onclick="alert('æŸ¥çœ‹å…¶ä»–æ¸¸æˆ')">
                                <span>ğŸ®</span>
                                <span>æŸ¥çœ‹å…¶ä»–æ¸¸æˆ</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        };
        
        // é”™è¯¯å¯¹è¯æ¡†æµ‹è¯•å‡½æ•°
        window.testErrorDialog = function() {
            errorHandler._showErrorDialog({
                title: 'æµ‹è¯•é”™è¯¯',
                message: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é”™è¯¯å¯¹è¯æ¡†ï¼Œç”¨äºæ¼”ç¤ºé”™è¯¯å¤„ç†åŠŸèƒ½ã€‚',
                type: 'error',
                actions: [
                    {
                        text: 'é‡è¯•',
                        action: () => alert('ç‚¹å‡»äº†é‡è¯•æŒ‰é’®')
                    },
                    {
                        text: 'å–æ¶ˆ',
                        action: () => console.log('ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®')
                    }
                ]
            });
        };
        
        window.testWarningDialog = function() {
            errorHandler._showErrorDialog({
                title: 'è­¦å‘Šæç¤º',
                message: 'è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šå¯¹è¯æ¡†ï¼Œæé†’ç”¨æˆ·æ³¨æ„æŸäº›é—®é¢˜ã€‚',
                type: 'warning',
                actions: [
                    {
                        text: 'æˆ‘çŸ¥é“äº†',
                        action: () => console.log('ç”¨æˆ·ç¡®è®¤äº†è­¦å‘Š')
                    },
                    {
                        text: 'ä¸å†æç¤º',
                        action: () => alert('å·²è®¾ç½®ä¸å†æç¤º')
                    }
                ]
            });
        };
        
        window.testTimeoutDialog = function() {
            errorHandler._showErrorDialog({
                title: 'è¯·æ±‚è¶…æ—¶',
                message: 'ç½‘ç»œè¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥ã€‚',
                type: 'warning',
                actions: [
                    {
                        text: 'é‡è¯•',
                        action: () => alert('æ­£åœ¨é‡è¯•...')
                    },
                    {
                        text: 'å–æ¶ˆ',
                        action: () => console.log('ç”¨æˆ·å–æ¶ˆäº†æ“ä½œ')
                    }
                ]
            });
        };
        
        window.testOfflineDialog = function() {
            errorHandler._showErrorDialog({
                title: 'ç½‘ç»œè¿æ¥å¼‚å¸¸',
                message: 'å½“å‰ç½‘ç»œä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥åé‡è¯•ã€‚',
                type: 'warning',
                actions: [
                    {
                        text: 'é‡è¯•',
                        action: () => window.location.reload()
                    },
                    {
                        text: 'ç¦»çº¿æ¨¡å¼',
                        action: () => alert('å·²åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼')
                    }
                ]
            });
        };
        
        console.log('é”™è¯¯å¤„ç†æµ‹è¯•é¡µé¢å·²åŠ è½½');
    </script>
</body>
</html>